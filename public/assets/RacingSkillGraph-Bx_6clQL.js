import{j as r}from"./index-BypqA20B.js";import{r as o}from"./vendor-react-BGsnWRWU.js";import{f as h,C,b as S,P as k,L as j,T as v,p as E,c as R,i as A,a as D}from"./vendor-chart-BMU4AhuH.js";import{a as L}from"./chartTheme-DLOnjtYC.js";C.register(S,k,j,v,E,R,A,D);function q({wsRef:l,wsMessages:a,sendWs:s,darkMode:i,chartHeight:p=400}){const[c,u]=o.useState([]),m=o.useRef(!1);o.useEffect(()=>{if(!(!a||a.length===0))try{const t=a[a.length-1];if(t&&t.startsWith("{")){const n=JSON.parse(t);if(n&&n.type==="racingskill"&&Array.isArray(n.data)){const y=n.data.filter(e=>e&&e.date!=null&&typeof e.racingskill=="number").map(e=>({t:new Date(e.date),v:e.racingskill})).sort((e,x)=>e.t-x.t);u(y)}}}catch{}},[a]),o.useEffect(()=>{if(!m.current&&l&&l.current&&l.current.readyState===1){try{s&&s("racingskill")}catch{}m.current=!0}},[l,a,s]);const d=c.map(t=>t.t),f=c.map(t=>t.v),g={labels:d,datasets:[{label:"Racing Skill",data:f,borderColor:i?"rgba(130,180,255,0.9)":"rgba(54,162,235,0.9)",backgroundColor:i?"rgba(130,180,255,0.25)":"rgba(54,162,235,0.25)",pointRadius:2,tension:.2,fill:!0,yAxisID:"y"}]},b=L({responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{x:{type:"time",time:{unit:"day"},ticks:{maxRotation:0}},y:{title:{display:!0,text:"Skill"},beginAtZero:!0}},plugins:{legend:{display:!0},tooltip:{enabled:!0}}},i);return r.jsx("div",{className:"card",style:{height:p,display:"flex",flexDirection:"column",marginBottom:0,...i?{background:"#1b1b1b",color:"#e0e0e0",border:"1px solid #2a2a2a"}:{}},children:r.jsxs("div",{className:"card-body",style:{flex:1,display:"flex",flexDirection:"column",padding:"0.75rem 0.75rem 0.5rem",...i?{background:"#1b1b1b",color:"#e0e0e0"}:{}},children:[r.jsx("h5",{className:"card-title",style:{marginBottom:"0.5rem",fontSize:"1rem",...i?{background:"#222",color:"#e0e0e0"}:{}},children:"Racing Skill"}),r.jsx("div",{style:{flex:1,minHeight:0},children:r.jsx(h,{data:g,options:b})})]})})}export{q as default};
